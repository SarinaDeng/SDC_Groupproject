<!DOCTYPE html>
<html lang="en">

<head>
    <title>Commuting modes in London</title>
    <meta charset="utf-8">
    <meta name="author" content="spatial group 1">
    <meta name="description" content="research how london's commuting mode like in public,personal and other ways." />


    <!-- CSS Files -->
    <!-- <link rel="stylesheet" type="text/css" href="css/reset.css"> -->
    <!-- <link rel="stylesheet" type="text/css" href="css/animate.css"> -->
    <!-- <link rel="stylesheet" type="text/css" href="css/main copy.css"> -->
    <link rel="stylesheet" type="text/css" href="css/characteristic.css">


    <!-- Javascript Files -->
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/slider.js"></script>
    <script type="text/javascript" src="js/wow.js"></script>
    <script type="text/javascript" src="js/main.js"></script>

    <!-- load library and highcharts -->
    <script src='http://code.jquery.com/jquery-1.10.2.min.js?ver=1.10.2'></script>
    <script src="http://code.highcharts.com/highcharts.js"></script>
    <script src="http://code.highcharts.com/highcharts-3d.js"></script>
    <script src="http://cdn.hcharts.cn/highcharts/highcharts.js"></script>
    <!-- save the export function module file was introduced after highcharts. Js -->
    <script src="http://cdn.hcharts.cn/highcharts/modules/exporting.js"></script>
    <!-- Client export function module is optional -->
    <script src="http://cdn.hcharts.cn/highcharts/modules/offline-exporting.js"></script>
    <link href="http://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css" />
</head>


<body>

    <!-- header part -->
    <header>
        <div class="container">

            <!-- Logo  -->
            <a href="#" class="logo">
                <img src="img/logo5.png" alt="logo" width="35px" />
            </a>
            <!-- title after logo -->
            <p><b> Commuting modes in London</b></p>

            <!-- Navigation Menu  -->
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="characteristic.html" class="selected">Characteristic</a></li>
                    <li><a href="analysis.html">Analysis</a></li>
                    <li><a href="group.html">Group</a></li>
                </ul>
            </nav>

        </div>
    </header>
    <!-- end header -->


    <!-- content -->
    <!-- commuters -->
    <div id="commuter">
        <div class="commuter_right">
            <div class="words">
                <!-- change change change change change change change change change-->
                <p>
                    We divided London commuting modes into three types and analysed the characteristics of commuters in 2011 according to gender, age, qualification, working hours, occupation and working distance. Public transport refers to train, underground, metro, light
                    rail, tram, bus, minibus or coach. Personal transport refers to private car or van. Other transport refers to bicycle or walking.
                </p>
                <!-- change change change change change change change change change-->

            </div>

            <!-- link each title -->
            <div class="index">
                <div class="commuter_age">
                    <a href="#age_sex" style="color:rgb(255, 255, 255);">
                        <h5>Sex & Age</h5>
                    </a>
                </div>
                <div class="commuter_qualification">
                    <a href="#qualification" style="color:rgb(255, 255, 255);">
                        <h5>Qualification</h5>
                    </a>
                </div>
                <div class="commuter_occupation">
                    <a href="#occupation" style="color:rgb(255, 255, 255);">
                        <h5>Occupation</h5>
                    </a>
                </div>
                <div class="commuter_distance">
                    <a href="#distance" style="color:rgb(255, 255, 255);">
                        <h5>Work Distance</h5>
                    </a>

                </div>
            </div>
        </div>

        <div class="commuters"></div>
        <script language="JavaScript">
            // create profile using Highcharts
            $(document).ready(function() {
                // get data
                $.getJSON("http://dev.spatialdatacapture.org:8716/commuting", function(data) {
                    var population = 0;
                    var public = 0;
                    var personal = 0;
                    var other = 0;
                    $.each(data, function(i) {
                        var pop = data[i].population;
                        var pub = data[i]["all public transport"];
                        var per = data[i]["all personal transport"];
                        var oth = data[i]["all other"];
                        // sum all items
                        population += pop;
                        public += pub;
                        personal += per;
                        other += oth;
                    });
                    // calculate percentage and keep two decimal places
                    public = (public / population * 100).toFixed(1);
                    personal = (personal / population * 100).toFixed(1);
                    other = (other / population * 100).toFixed(1);

                    console.log(public, personal, other);

                    // start chart
                    var chart = {
                        // chart type
                        type: "pie",
                        options3d: {
                            enabled: true,
                            alpha: 45,
                            beta: 0
                        },
                        // The background is transparent
                        backgroundColor: "rgba(0,0,0,0)",
                        marginTop: 50
                    };
                    var title = {
                        text: "<b>The preference of commuting mode in London (2011)</b>",
                        // style: {
                        //     color: "#FFFFFF"
                        // }
                    };
                    // Bubble tip for data
                    var tooltip = {
                        pointFormat: "{series.name}: <b>{point.percentage:.1f}%</b>"
                    };

                    var plotOptions = {
                        pie: {
                            // When the point is clicked, the corresponding sector is stripped
                            allowPointSelect: true,
                            cursor: "pointer",
                            depth: 35,
                            // data labels
                            dataLabels: {
                                enableled: true,
                                format: "{point.name}"
                            },
                            colors: ["#99CC99", "#FFCC99", "#99CCFF"]
                        }
                    };
                    var credits = {
                        enabled: false
                    };

                    var series = [{
                        type: "pie",
                        name: "Commuters",
                        data: [
                            ["Other Transport (bicycle/walking)", parseFloat(other)],
                            ["Personal Transport (car/ van)", parseFloat(personal)], {
                                name: "Public Transport",
                                y: parseFloat(public),
                                sliced: true,
                                selected: true
                            }
                        ]
                    }];


                    // creat json data
                    var json = {};
                    json.chart = chart;
                    json.title = title;
                    json.tooltip = tooltip;
                    json.plotOptions = plotOptions;
                    json.credits = credits;
                    json.series = series;
                    $(".commuters").highcharts(json);

                })
            });
        </script>
    </div>



    <!-- age and sex -->
    <div id="age_sex">
        <div class="title_box1">
            <a href="#" style="color:rgb(255, 255, 255);">
                <h4>Sex & Age</h4>
            </a>
        </div>
        <div class="age"></div>
        <script type="text/javascript">
            $(document).ready(function() {
                $.getJSON("http://dev.spatialdatacapture.org:8716/public_transport_2", function(data) {
                    var pubA1 = 0;
                    var pubA2 = 0;
                    var pubA3 = 0;
                    var pubA4 = 0;
                    var pubA5 = 0;

                    $.each(data, function(i) {
                        var pub1 = data[i]["Age_16-24"];
                        var pub2 = data[i]["Age_25-34"];
                        var pub3 = data[i]["Age_35-49"];
                        var pub4 = data[i]["Age_50-64"];
                        var pub5 = data[i]["Age_>=65"];

                        pubA1 += pub1;
                        pubA2 += pub2;
                        pubA3 += pub3;
                        pubA4 += pub4;
                        pubA5 += pub5;
                    });
                    console.log(pubA1, pubA2, pubA3, pubA4, pubA5);

                    $.getJSON("http://dev.spatialdatacapture.org:8716/personal_transport_2", function(data) {
                        var pubB1 = 0;
                        var pubB2 = 0;
                        var pubB3 = 0;
                        var pubB4 = 0;
                        var pubB5 = 0;

                        $.each(data, function(i) {
                            var pub1 = data[i]["Age_16-24"];
                            var pub2 = data[i]["Age_25-34"];
                            var pub3 = data[i]["Age_35-49"];
                            var pub4 = data[i]["Age_50-64"];
                            var pub5 = data[i]["Age_>=65"];

                            pubB1 += pub1;
                            pubB2 += pub2;
                            pubB3 += pub3;
                            pubB4 += pub4;
                            pubB5 += pub5;
                        });
                        console.log(pubB1, pubB2, pubB3, pubB4, pubB5);

                        $.getJSON("http://dev.spatialdatacapture.org:8716/other_transport_2", function(data) {
                            var pubC1 = 0;
                            var pubC2 = 0;
                            var pubC3 = 0;
                            var pubC4 = 0;
                            var pubC5 = 0;

                            $.each(data, function(i) {
                                var pub1 = data[i]["Age_16-24"];
                                var pub2 = data[i]["Age_25-34"];
                                var pub3 = data[i]["Age_35-49"];
                                var pub4 = data[i]["Age_50-64"];
                                var pub5 = data[i]["Age_>=65"];

                                pubC1 += pub1;
                                pubC2 += pub2;
                                pubC3 += pub3;
                                pubC4 += pub4;
                                pubC5 += pub5;
                            });
                            console.log(pubC1, pubC2, pubC3, pubC4, pubC5);
                            // start chart
                            var chart = {
                                type: "column"
                            };
                            var title = {
                                text: "Age structure"
                            };
                            var xAxis = {
                                categories: ["Public transport", "Personal transport", "Other transport"]
                            };
                            var yAxis = {
                                min: 0,
                                title: {
                                    text: "Proportion"
                                }
                            };
                            var tooltip = {
                                pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.percentage:.0f}%)<br/>',
                                shared: true
                            };
                            var plotOptions = {
                                column: {
                                    stacking: "percent"
                                }
                            };
                            var credits = {
                                enabled: false
                            };
                            var series = [{
                                name: "16-24",
                                color: "#CCCCFF",
                                data: [pubA1, pubB1, pubC1]
                            }, {
                                name: "25-34",
                                color: "#FF9966",
                                data: [pubA2, pubB2, pubC2]
                            }, {
                                name: "35-49",
                                color: "#99CC99",
                                data: [pubA3, pubB3, pubC3]
                            }, {
                                name: "50-64",
                                color: "#6699CC",
                                data: [pubA4, pubB4, pubC4]
                            }, {
                                name: ">=65 ",
                                color: "#FF6666",
                                data: [pubA5, pubB5, pubC5]
                            }];

                            var json = {};
                            json.chart = chart;
                            json.title = title;
                            json.xAxis = xAxis;
                            json.yAxis = yAxis;
                            json.tooltip = tooltip;
                            json.plotOptions = plotOptions;
                            json.credits = credits;
                            json.series = series;
                            $('.age').highcharts(json);
                        });

                    });
                });
            });
        </script>

        <div class="sex"></div>
        <script type="text/javascript">
            $(document).ready(function() {
                $.getJSON("http://dev.spatialdatacapture.org:8716/public_transport_2", function(data) {
                    var pubA1 = 0;
                    var pubA2 = 0;

                    $.each(data, function(i) {
                        var pub1 = data[i]["sex_Males"];
                        var pub2 = data[i]["sex_Females"];

                        pubA1 += pub1;
                        pubA2 += pub2;
                    });
                    console.log(pubA1, pubA2);

                    $.getJSON("http://dev.spatialdatacapture.org:8716/personal_transport_2", function(data) {
                        var pubB1 = 0;
                        var pubB2 = 0;

                        $.each(data, function(i) {
                            var pub1 = data[i]["sex_Males"];
                            var pub2 = data[i]["sex_Females"];

                            pubB1 += pub1;
                            pubB2 += pub2;

                        });
                        console.log(pubB1, pubB2);

                        $.getJSON("http://dev.spatialdatacapture.org:8716/other_transport_2", function(data) {
                            var pubC1 = 0;
                            var pubC2 = 0;
                            var pubC3 = 0;
                            var pubC4 = 0;
                            var pubC5 = 0;

                            $.each(data, function(i) {
                                var pub1 = data[i]["sex_Males"];
                                var pub2 = data[i]["sex_Females"];

                                pubC1 += pub1;
                                pubC2 += pub2;

                            });
                            console.log(pubC1, pubC2);
                            // start chart
                            var chart = {
                                type: "column"
                            };
                            var title = {
                                text: "Sex"
                            };
                            var xAxis = {
                                categories: ["Public transport", "Personal transport", "Other transport"]
                            };
                            var yAxis = {
                                min: 0,
                                title: {
                                    text: "Proportion"
                                }
                            };
                            var tooltip = {
                                pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.percentage:.0f}%)<br/>',
                                shared: true
                            };
                            var plotOptions = {
                                column: {
                                    stacking: "percent"
                                }
                            };
                            var credits = {
                                enabled: false
                            };
                            var series = [{
                                name: "Male",
                                color: "#6699CC",
                                data: [pubA1, pubB1, pubC1]
                            }, {
                                name: "Female",
                                color: "#CCCCCC",
                                data: [pubA2, pubB2, pubC2]
                            }];

                            var json = {};
                            json.chart = chart;
                            json.title = title;
                            json.xAxis = xAxis;
                            json.yAxis = yAxis;
                            json.tooltip = tooltip;
                            json.plotOptions = plotOptions;
                            json.credits = credits;
                            json.series = series;
                            $('.sex').highcharts(json);
                        });

                    });
                });
            });
        </script>
    </div>


    <!-- qualification -->
    <div id="qualification">
        <div class="title_box2">
            <a href="#" style="color:rgb(255, 255, 255);">
                <h4>Qualification</h4>
            </a>
        </div>

        <div class="qualification_public"></div>
        <div class="qualification_personal"></div>
        <div class="qualification_other"></div>
        <script type="text/javascript">
            $(document).ready(function() {
                $.getJSON("http://dev.spatialdatacapture.org:8716/public_transport_2", function(data) {
                    var pubA1 = 0;
                    var pubA2 = 0;
                    var pubA3 = 0;
                    var pubA4 = 0;
                    var pubA5 = 0;
                    var pubA6 = 0;
                    var pubA7 = 0;
                    var population = 0;

                    $.each(data, function(i) {
                        var pub1 = data[i]["Highest Level of Qualification_No qualifications"];
                        var pub2 = data[i]["Highest Level of Qualification_Level 1"];
                        var pub3 = data[i]["Highest Level of Qualification_Level 2"];
                        var pub4 = data[i]["Highest Level of Qualification_Apprenticeship"];
                        var pub5 = data[i]["Highest Level of Qualification_Level 3"];
                        var pub6 = data[i]["Highest Level of Qualification_Level 4"];
                        var pub7 = data[i]["Highest Level of Qualification_Other qualifications"];
                        var pop = data[i]["all_public transport"];

                        pubA1 += pub1;
                        pubA2 += pub2;
                        pubA3 += pub3;
                        pubA4 += pub4;
                        pubA5 += pub5;
                        pubA6 += pub6;
                        pubA7 += pub7;
                        population += pop
                    });

                    console.log(pubA1, pubA2, pubA3, pubA4, pubA5, pubA6, pubA7, population);
                    pubA1 = (pubA1 / population * 100).toFixed(1);
                    pubA2 = (pubA2 / population * 100).toFixed(1);
                    pubA3 = (pubA3 / population * 100).toFixed(1);
                    pubA4 = (pubA4 / population * 100).toFixed(1);
                    pubA5 = (pubA5 / population * 100).toFixed(1);
                    pubA6 = (pubA6 / population * 100).toFixed(1);
                    pubA7 = (pubA7 / population * 100).toFixed(1);
                    console.log(pubA1, pubA2, pubA3, pubA4, pubA5, pubA6, pubA7);
                    // start chart
                    var chart = null;
                    $(function() {
                        $(".qualification_public").highcharts({
                            chart: {
                                plotBackgroundColor: null,
                                plotBorderWidth: null,
                                plotShadow: false,
                                spacing: [40, 0, 20, 0]
                            },
                            title: {
                                floating: true,
                                text: "Public transport"
                            },
                            tooltip: {
                                pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                            },
                            plotOptions: {
                                pie: {
                                    allowPointSelect: true,
                                    cursor: 'pointer',
                                    dataLabels: {
                                        enabled: false,
                                        format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                                        style: {
                                            color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                                        },
                                    },
                                    showInLegend: true
                                }
                            },
                            credits: {
                                enabled: false
                            },
                            series: [{
                                type: "pie",
                                innerSize: "80%",
                                name: "Commuters",
                                data: [
                                    ["No qualifications", parseFloat(pubA1)],
                                    ["Level 1", parseFloat(pubA2)], {
                                        name: "Level 2",
                                        y: parseFloat(pubA3),
                                        sliced: true,
                                        selected: true
                                    },
                                    ["Apprenticeship", parseFloat(pubA4)],
                                    ["Level 3", parseFloat(pubA5)],
                                    ["Level 4", parseFloat(pubA6)],
                                    ["Other qualifications", parseFloat(pubA7)]
                                ]
                            }]
                        }, function(c) {
                            // The center of a circle
                            var centerY = c.series[0].center[1],
                                titleHeight = parseInt(c.title.styles.fontSize);
                            c.setTitle({
                                y: centerY + titleHeight / 2
                            });
                            chart = c;
                        });
                    });
                });

                $.getJSON("http://dev.spatialdatacapture.org:8716/personal_transport_2", function(data) {
                    var pubB1 = 0;
                    var pubB2 = 0;
                    var pubB3 = 0;
                    var pubB4 = 0;
                    var pubB5 = 0;
                    var pubB6 = 0;
                    var pubB7 = 0;
                    var population = 0;

                    $.each(data, function(i) {
                        var pub1 = data[i]["Highest Level of Qualification_No qualifications"];
                        var pub2 = data[i]["Highest Level of Qualification_Level 1"];
                        var pub3 = data[i]["Highest Level of Qualification_Level 2"];
                        var pub4 = data[i]["Highest Level of Qualification_Apprenticeship"];
                        var pub5 = data[i]["Highest Level of Qualification_Level 3"];
                        var pub6 = data[i]["Highest Level of Qualification_Level 4"];
                        var pub7 = data[i]["Highest Level of Qualification_Other qualifications"];
                        var pop = data[i]["all_personal transport"];

                        pubB1 += pub1;
                        pubB2 += pub2;
                        pubB3 += pub3;
                        pubB4 += pub4;
                        pubB5 += pub5;
                        pubB6 += pub6;
                        pubB7 += pub7;
                        population += pop
                    });

                    console.log(pubB1, pubB2, pubB3, pubB4, pubB5, pubB6, pubB7, population);
                    pubB1 = (pubB1 / population * 100).toFixed(1);
                    pubB2 = (pubB2 / population * 100).toFixed(1);
                    pubB3 = (pubB3 / population * 100).toFixed(1);
                    pubB4 = (pubB4 / population * 100).toFixed(1);
                    pubB5 = (pubB5 / population * 100).toFixed(1);
                    pubB6 = (pubB6 / population * 100).toFixed(1);
                    pubB7 = (pubB7 / population * 100).toFixed(1);
                    console.log(pubB1, pubB2, pubB3, pubB4, pubB5, pubB6, pubB7);
                    // start chart
                    var chart = null;
                    $(function() {
                        $(".qualification_personal").highcharts({
                            chart: {
                                plotBackgroundColor: null,
                                plotBorderWidth: null,
                                plotShadow: false,
                                spacing: [40, 0, 20, 0]
                            },
                            title: {
                                floating: true,
                                text: "Personal transport"
                            },
                            tooltip: {
                                pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                            },
                            plotOptions: {
                                pie: {
                                    allowPointSelect: true,
                                    cursor: 'pointer',
                                    dataLabels: {
                                        enabled: false,
                                        format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                                        style: {
                                            color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                                        },
                                    },
                                    showInLegend: true
                                }
                            },
                            credits: {
                                enabled: false
                            },
                            series: [{
                                type: "pie",
                                innerSize: "80%",
                                name: "Commuters",
                                data: [
                                    ["No qualifications", parseFloat(pubB1)],
                                    ["Level 1", parseFloat(pubB2)], {
                                        name: "Level 2",
                                        y: parseFloat(pubB3),
                                        sliced: true,
                                        selected: true
                                    },
                                    ["Apprenticeship", parseFloat(pubB4)],
                                    ["Level 3", parseFloat(pubB5)],
                                    ["Level 4", parseFloat(pubB6)],
                                    ["Other qualifications", parseFloat(pubB7)]
                                ]
                            }]
                        }, function(c) {
                            // The center of a circle
                            var centerY = c.series[0].center[1],
                                titleHeight = parseInt(c.title.styles.fontSize);
                            c.setTitle({
                                y: centerY + titleHeight / 2
                            });
                            chart = c;
                        });
                    });
                });

                $.getJSON("http://dev.spatialdatacapture.org:8716/other_transport_2", function(data) {
                    var pubC1 = 0;
                    var pubC2 = 0;
                    var pubC3 = 0;
                    var pubC4 = 0;
                    var pubC5 = 0;
                    var pubC6 = 0;
                    var pubC7 = 0;
                    var population = 0;

                    $.each(data, function(i) {
                        var pub1 = data[i]["Highest Level of Qualification_No qualifications"];
                        var pub2 = data[i]["Highest Level of Qualification_Level 1"];
                        var pub3 = data[i]["Highest Level of Qualification_Level 2"];
                        var pub4 = data[i]["Highest Level of Qualification_Apprenticeship"];
                        var pub5 = data[i]["Highest Level of Qualification_Level 3"];
                        var pub6 = data[i]["Highest Level of Qualification_Level 4"];
                        var pub7 = data[i]["Highest Level of Qualification_Other qualifications"];
                        var pop = data[i]["all_other"];

                        pubC1 += pub1;
                        pubC2 += pub2;
                        pubC3 += pub3;
                        pubC4 += pub4;
                        pubC5 += pub5;
                        pubC6 += pub6;
                        pubC7 += pub7;
                        population += pop
                    });

                    console.log(pubC1, pubC2, pubC3, pubC4, pubC5, pubC6, pubC7, population);
                    pubC1 = (pubC1 / population * 100).toFixed(1);
                    pubC2 = (pubC2 / population * 100).toFixed(1);
                    pubC3 = (pubC3 / population * 100).toFixed(1);
                    pubC4 = (pubC4 / population * 100).toFixed(1);
                    pubC5 = (pubC5 / population * 100).toFixed(1);
                    pubC6 = (pubC6 / population * 100).toFixed(1);
                    pubC7 = (pubC7 / population * 100).toFixed(1);
                    console.log(pubC1, pubC2, pubC3, pubC4, pubC5, pubC6, pubC7);
                    // start chart
                    var chart = null;
                    $(function() {
                        $(".qualification_other").highcharts({
                            chart: {
                                plotBackgroundColor: null,
                                plotBorderWidth: null,
                                plotShadow: false,
                                spacing: [40, 0, 20, 0]
                            },
                            title: {
                                floating: true,
                                text: "Other transport"
                            },
                            tooltip: {
                                pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                            },
                            plotOptions: {
                                pie: {
                                    allowPointSelect: true,
                                    cursor: 'pointer',
                                    dataLabels: {
                                        enabled: false,
                                        format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                                        style: {
                                            color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                                        },
                                    },
                                    showInLegend: true
                                }
                            },
                            credits: {
                                enabled: false
                            },
                            series: [{
                                type: "pie",
                                innerSize: "80%",
                                name: "Commuters",
                                data: [
                                    ["No qualifications", parseFloat(pubC1)],
                                    ["Level 1", parseFloat(pubC2)], {
                                        name: "Level 2",
                                        y: parseFloat(pubC3),
                                        sliced: true,
                                        selected: true
                                    },
                                    ["Apprenticeship", parseFloat(pubC4)],
                                    ["Level 3", parseFloat(pubC5)],
                                    ["Level 4", parseFloat(pubC6)],
                                    ["Other qualifications", parseFloat(pubC7)]
                                ]
                            }]
                        }, function(c) {
                            // The center of a circle
                            var centerY = c.series[0].center[1],
                                titleHeight = parseInt(c.title.styles.fontSize);
                            c.setTitle({
                                y: centerY + titleHeight / 2
                            });
                            chart = c;
                        });

                    });
                });

            });
        </script>
    </div>


    <!-- occupation -->
    <div id="occupation">
        <div class="title_box3">
            <a href="#" style="color:rgb(255, 255, 255);">
                <h4>Occupation</h4>
            </a>
        </div>

        <div class="occupation_public"></div>
        <div class="occupation_personal"></div>
        <div class="occupation_other"></div>
        <script type="text/javascript">
            $(document).ready(function() {
                $.getJSON("http://dev.spatialdatacapture.org:8716/public_transport_2", function(data) {
                    var pubA1 = 0;
                    var pubA2 = 0;
                    var pubA3 = 0;
                    var pubA4 = 0;
                    var pubA5 = 0;
                    var pubA6 = 0;
                    var pubA7 = 0;
                    var pubA8 = 0;
                    var pubA9 = 0;
                    var population = 0;

                    $.each(data, function(i) {
                        var pub1 = data[i]["Occupation_Managers/directors/senior officials"];
                        var pub2 = data[i]["Occupation_Professional occupations"];
                        var pub3 = data[i]["Occupation_Associate professional and technical occupations"];
                        var pub4 = data[i]["Occupation_Administrative and secretarial occupations"];
                        var pub5 = data[i]["Occupation_Skilled trades occupations"];
                        var pub6 = data[i]["Occupation_Caring/leisure/other service occupations"];
                        var pub7 = data[i]["Occupation_Sales and customer service occupations"];
                        var pub8 = data[i]["Occupation_Process/plant/machine operatives"];
                        var pub9 = data[i]["Occupation_Elementary occupations"];
                        var pop = data[i]["all_public transport"];

                        pubA1 += pub1;
                        pubA2 += pub2;
                        pubA3 += pub3;
                        pubA4 += pub4;
                        pubA5 += pub5;
                        pubA6 += pub6;
                        pubA7 += pub7;
                        pubA8 += pub8;
                        pubA9 += pub9;
                        population += pop
                    });

                    console.log(pubA1, pubA2, pubA3, pubA4, pubA5, pubA6, pubA7, pubA8, pubA9, population);
                    pubA1 = (pubA1 / population * 100).toFixed(1);
                    pubA2 = (pubA2 / population * 100).toFixed(1);
                    pubA3 = (pubA3 / population * 100).toFixed(1);
                    pubA4 = (pubA4 / population * 100).toFixed(1);
                    pubA5 = (pubA5 / population * 100).toFixed(1);
                    pubA6 = (pubA6 / population * 100).toFixed(1);
                    pubA7 = (pubA7 / population * 100).toFixed(1);
                    pubA8 = (pubA8 / population * 100).toFixed(1);
                    pubA9 = (pubA9 / population * 100).toFixed(1);
                    console.log(pubA1, pubA2, pubA3, pubA4, pubA5, pubA6, pubA7, pubA8, pubA9);
                    // start chart
                    var chart = null;
                    $(function() {
                        $(".occupation_public").highcharts({
                            chart: {
                                plotBackgroundColor: null,
                                plotBorderWidth: null,
                                plotShadow: false,
                                spacing: [40, 0, 20, 0]
                            },
                            title: {
                                floating: true,
                                text: "Public transport"
                            },
                            tooltip: {
                                pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                            },
                            plotOptions: {
                                pie: {
                                    allowPointSelect: true,
                                    cursor: 'pointer',
                                    dataLabels: {
                                        enabled: false,
                                        format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                                        style: {
                                            color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                                        },
                                    },
                                    showInLegend: true
                                }
                            },
                            credits: {
                                enabled: false
                            },
                            series: [{
                                type: "pie",
                                innerSize: "80%",
                                name: "Commuters",
                                data: [
                                    ["Managers/directors/senior officials", parseFloat(pubA1)],
                                    ["Professional occupations", parseFloat(pubA2)], {
                                        name: "Associate professional and technical occupations",
                                        y: parseFloat(pubA3),
                                        sliced: true,
                                        selected: true
                                    },
                                    ["Administrative and secretarial occupations", parseFloat(pubA4)],
                                    ["Skilled trades occupations", parseFloat(pubA5)],
                                    ["Caring/leisure/other service occupations", parseFloat(pubA6)],
                                    ["Sales and customer service occupations", parseFloat(pubA7)],
                                    ["Process/plant/machine operatives", parseFloat(pubA8)],
                                    ["Elementary occupations", parseFloat(pubA9)]
                                ]
                            }]
                        }, function(c) {
                            // The center of a circle
                            var centerY = c.series[0].center[1],
                                titleHeight = parseInt(c.title.styles.fontSize);
                            c.setTitle({
                                y: centerY + titleHeight / 2
                            });
                            chart = c;
                        });
                    });
                });

                $.getJSON("http://dev.spatialdatacapture.org:8716/personal_transport_2", function(data) {
                    var pubB1 = 0;
                    var pubB2 = 0;
                    var pubB3 = 0;
                    var pubB4 = 0;
                    var pubB5 = 0;
                    var pubB6 = 0;
                    var pubB7 = 0;
                    var pubB8 = 0;
                    var pubB9 = 0;
                    var population = 0;

                    $.each(data, function(i) {
                        var pub1 = data[i]["Occupation_Managers/directors/senior officials"];
                        var pub2 = data[i]["Occupation_Professional occupations"];
                        var pub3 = data[i]["Occupation_Associate professional and technical occupations"];
                        var pub4 = data[i]["Occupation_Administrative and secretarial occupations"];
                        var pub5 = data[i]["Occupation_Skilled trades occupations"];
                        var pub6 = data[i]["Occupation_Caring/leisure/other service occupations"];
                        var pub7 = data[i]["Occupation_Sales and customer service occupations"];
                        var pub8 = data[i]["Occupation_Process/plant/machine operatives"];
                        var pub9 = data[i]["Occupation_Elementary occupations"];
                        var pop = data[i]["all_personal transport"];

                        pubB1 += pub1;
                        pubB2 += pub2;
                        pubB3 += pub3;
                        pubB4 += pub4;
                        pubB5 += pub5;
                        pubB6 += pub6;
                        pubB7 += pub7;
                        pubB8 += pub8;
                        pubB9 += pub9;
                        population += pop
                    });

                    console.log(pubB1, pubB2, pubB3, pubB4, pubB5, pubB6, pubB7, pubB8, pubB9, population);
                    pubB1 = (pubB1 / population * 100).toFixed(1);
                    pubB2 = (pubB2 / population * 100).toFixed(1);
                    pubB3 = (pubB3 / population * 100).toFixed(1);
                    pubB4 = (pubB4 / population * 100).toFixed(1);
                    pubB5 = (pubB5 / population * 100).toFixed(1);
                    pubB6 = (pubB6 / population * 100).toFixed(1);
                    pubB7 = (pubB7 / population * 100).toFixed(1);
                    pubB8 = (pubB8 / population * 100).toFixed(1);
                    pubB9 = (pubB9 / population * 100).toFixed(1);
                    console.log(pubB1, pubB2, pubB3, pubB4, pubB5, pubB6, pubB7, pubB8, pubB9);
                    // start chart
                    var chart = null;
                    $(function() {
                        $(".occupation_personal").highcharts({
                            chart: {
                                plotBackgroundColor: null,
                                plotBorderWidth: null,
                                plotShadow: false,
                                spacing: [40, 0, 20, 0]
                            },
                            title: {
                                floating: true,
                                text: "Personal transport"
                            },
                            tooltip: {
                                pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                            },
                            plotOptions: {
                                pie: {
                                    allowPointSelect: true,
                                    cursor: 'pointer',
                                    dataLabels: {
                                        enabled: false,
                                        format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                                        style: {
                                            color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                                        },
                                    },
                                    showInLegend: true
                                }
                            },
                            credits: {
                                enabled: false
                            },
                            series: [{
                                type: "pie",
                                innerSize: "80%",
                                name: "Commuters",
                                data: [
                                    ["Managers/directors/senior officials", parseFloat(pubB1)],
                                    ["Professional occupations", parseFloat(pubB2)], {
                                        name: "Associate professional and technical occupations",
                                        y: parseFloat(pubB3),
                                        sliced: true,
                                        selected: true
                                    },
                                    ["Administrative and secretarial occupations", parseFloat(pubB4)],
                                    ["Skilled trades occupations", parseFloat(pubB5)],
                                    ["Caring/leisure/other service occupations", parseFloat(pubB6)],
                                    ["Sales and customer service occupations", parseFloat(pubB7)],
                                    ["Process/plant/machine operatives", parseFloat(pubB8)],
                                    ["Elementary occupations", parseFloat(pubB9)]
                                ]
                            }]
                        }, function(c) {
                            // The center of a circle
                            var centerY = c.series[0].center[1],
                                titleHeight = parseInt(c.title.styles.fontSize);
                            c.setTitle({
                                y: centerY + titleHeight / 2
                            });
                            chart = c;
                        });
                    });
                });

                $.getJSON("http://dev.spatialdatacapture.org:8716/other_transport_2", function(data) {
                    var pubC1 = 0;
                    var pubC2 = 0;
                    var pubC3 = 0;
                    var pubC4 = 0;
                    var pubC5 = 0;
                    var pubC6 = 0;
                    var pubC7 = 0;
                    var pubC8 = 0;
                    var pubC9 = 0;
                    var population = 0;

                    $.each(data, function(i) {
                        var pub1 = data[i]["Occupation_Managers/directors/senior officials"];
                        var pub2 = data[i]["Occupation_Professional occupations"];
                        var pub3 = data[i]["Occupation_Associate professional and technical occupations"];
                        var pub4 = data[i]["Occupation_Administrative and secretarial occupations"];
                        var pub5 = data[i]["Occupation_Skilled trades occupations"];
                        var pub6 = data[i]["Occupation_Caring/leisure/other service occupations"];
                        var pub7 = data[i]["Occupation_Sales and customer service occupations"];
                        var pub8 = data[i]["Occupation_Process/plant/machine operatives"];
                        var pub9 = data[i]["Occupation_Elementary occupations"];
                        var pop = data[i]["all_other"];

                        pubC1 += pub1;
                        pubC2 += pub2;
                        pubC3 += pub3;
                        pubC4 += pub4;
                        pubC5 += pub5;
                        pubC6 += pub6;
                        pubC7 += pub7;
                        pubC8 += pub8;
                        pubC9 += pub9;
                        population += pop
                    });

                    console.log(pubC1, pubC2, pubC3, pubC4, pubC5, pubC6, pubC7, pubC8, pubC9, population);
                    pubC1 = (pubC1 / population * 100).toFixed(1);
                    pubC2 = (pubC2 / population * 100).toFixed(1);
                    pubC3 = (pubC3 / population * 100).toFixed(1);
                    pubC4 = (pubC4 / population * 100).toFixed(1);
                    pubC5 = (pubC5 / population * 100).toFixed(1);
                    pubC6 = (pubC6 / population * 100).toFixed(1);
                    pubC7 = (pubC7 / population * 100).toFixed(1);
                    pubC8 = (pubC8 / population * 100).toFixed(1);
                    pubC9 = (pubC9 / population * 100).toFixed(1);
                    console.log(pubC1, pubC2, pubC3, pubC4, pubC5, pubC6, pubC7, pubC8, pubC9);
                    // start chart
                    var chart = null;
                    $(".occupation_other").highcharts({
                        chart: {
                            plotBackgroundColor: null,
                            plotBorderWidth: null,
                            plotShadow: false,
                            spacing: [40, 0, 20, 0]
                        },
                        title: {
                            floating: true,
                            text: "Other transport"
                        },
                        tooltip: {
                            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                        },
                        plotOptions: {
                            pie: {
                                allowPointSelect: true,
                                cursor: 'pointer',
                                dataLabels: {
                                    enabled: false,
                                    format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                                    style: {
                                        color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                                    },
                                },
                                showInLegend: true
                            }
                        },
                        credits: {
                            enabled: false
                        },
                        series: [{
                            type: "pie",
                            innerSize: "80%",
                            name: "Commuters",
                            data: [
                                ["Managers/directors/senior officials", parseFloat(pubC1)],
                                ["Professional occupations", parseFloat(pubC2)], {
                                    name: "Associate professional and technical occupations",
                                    y: parseFloat(pubC3),
                                    sliced: true,
                                    selected: true
                                },
                                ["Administrative and secretarial occupations", parseFloat(pubC4)],
                                ["Skilled trades occupations", parseFloat(pubC5)],
                                ["Caring/leisure/other service occupations", parseFloat(pubC6)],
                                ["Sales and customer service occupations", parseFloat(pubC7)],
                                ["Process/plant/machine operatives", parseFloat(pubC8)],
                                ["Elementary occupations", parseFloat(pubC9)]
                            ]
                        }]
                    }, function(c) {
                        // The center of a circle
                        var centerY = c.series[0].center[1],
                            titleHeight = parseInt(c.title.styles.fontSize);
                        c.setTitle({
                            y: centerY + titleHeight / 2
                        });
                        chart = c;
                    });
                });
            });
        </script>
    </div>


    <!-- distance -->
    <div id="distance">
        <div class="title_box4">
            <a href="#" style="color:rgb(255, 255, 255);">
                <h4>Work Distance</h4>
            </a>
        </div>

        <div class="distance_public"></div>
        <div class="distance_personal"></div>
        <div class="distance_other"></div>

        <script type="text/javascript">
            $(document).ready(function() {
                $.getJSON("http://dev.spatialdatacapture.org:8716/public_transport_2", function(data) {
                    var pubA1 = 0;
                    var pubA2 = 0;
                    var pubA3 = 0;
                    var pubA4 = 0;
                    var population = 0;

                    $.each(data, function(i) {
                        var pub1 = data[i]["distance_<10km"];
                        var pub2 = data[i]["distance_10km-30km"];
                        var pub3 = data[i]["distance_>=30km"];
                        var pub4 = data[i]["distance_Other"];
                        var pop = data[i]["all_public transport"];

                        pubA1 += pub1;
                        pubA2 += pub2;
                        pubA3 += pub3;
                        pubA4 += pub4;
                        population += pop;
                    });

                    console.log(pubA1, pubA2, pubA3, pubA4, population);
                    pubA1 = (pubA1 / population * 100).toFixed(1);
                    pubA2 = (pubA2 / population * 100).toFixed(1);
                    pubA3 = ((pubA3 + pubA4) / population * 100).toFixed(1);
                    console.log(pubA1, pubA2, pubA3);

                    $.getJSON("http://dev.spatialdatacapture.org:8716/personal_transport_2", function(data) {
                        var pubB1 = 0;
                        var pubB2 = 0;
                        var pubB3 = 0;
                        var pubB4 = 0;
                        var population = 0;

                        $.each(data, function(i) {
                            var pub1 = data[i]["distance_<10km"];
                            var pub2 = data[i]["distance_10km-30km"];
                            var pub3 = data[i]["distance_>=30km"];
                            var pub4 = data[i]["distance_Other"];
                            var pop = data[i]["all_personal transport"];

                            pubB1 += pub1;
                            pubB2 += pub2;
                            pubB3 += pub3;
                            pubB4 += pub4;
                            population += pop;
                        });

                        console.log(pubB1, pubB2, pubB3, pubB4, population);
                        pubB1 = (pubB1 / population * 100).toFixed(1);
                        pubB2 = (pubB2 / population * 100).toFixed(1);
                        pubB3 = ((pubB3 + pubB4) / population * 100).toFixed(1);
                        console.log(pubB1, pubB2, pubB3);


                        $.getJSON("http://dev.spatialdatacapture.org:8716/other_transport_2", function(data) {
                            var pubC1 = 0;
                            var pubC2 = 0;
                            var pubC3 = 0;
                            var pubC4 = 0;
                            var population = 0;

                            $.each(data, function(i) {
                                var pub1 = data[i]["distance_<10km"];
                                var pub2 = data[i]["distance_10km-30km"];
                                var pub3 = data[i]["distance_>=30km"];
                                var pub4 = data[i]["distance_Other"];
                                var pop = data[i]["all_other"];

                                pubC1 += pub1;
                                pubC2 += pub2;
                                pubC3 += pub3;
                                pubC4 += pub4;
                                population += pop;
                            });

                            console.log(pubC1, pubC2, pubC3, pubC4, population);
                            pubC1 = (pubC1 / population * 100).toFixed(1);
                            pubC2 = (pubC2 / population * 100).toFixed(1);
                            pubC3 = ((pubC3 + pubC4) / population * 100).toFixed(1);
                            console.log(pubC1, pubC2, pubC3);

                            var chart = {
                                plotBackgroundColor: null,
                                plotBorderWidth: 0,
                                plotShadow: false
                            };
                            var title_public = {
                                text: "<b>Public transport</b>",
                                style: {
                                    fontSize: '15px'
                                },
                                align: "center",
                                verticalAlign: "middle",
                                y: 70
                            };
                            var title_personal = {
                                text: "<b>Personal transport</b>",
                                style: {
                                    fontSize: '15px'
                                },
                                align: "center",
                                verticalAlign: "middle",
                                y: 70
                            };
                            var title_other = {
                                text: "<b>Other transport</b>",
                                style: {
                                    fontSize: '15px'
                                },
                                align: "center",
                                verticalAlign: "middle",
                                y: 70
                            };
                            var tooltip = {
                                pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                            };
                            var plotOptions = {
                                pie: {
                                    dataLabels: {
                                        enabled: true,
                                        distance: -35,
                                        style: {
                                            fontWeight: 'bold',
                                            color: 'white',
                                            textShadow: '0px 1px 2px black'
                                        }
                                    },
                                    startAngle: -90,
                                    endAngle: 90,
                                    center: ['50%', '75%'],
                                    colors: ["#99CC99", "#FFCC99", "#99CCFF"]
                                }
                            };
                            var credits = {
                                enabled: false
                            };
                            var series_public = [{
                                type: 'pie',
                                name: 'Commuters',
                                innerSize: '50%',
                                data: [{
                                        name: '<10km',
                                        y: parseFloat(pubA1),
                                        dataLabels: {
                                            enabled: true
                                        }
                                    },
                                    ['10km-30km', parseFloat(pubA2)],
                                    ['>=30km', parseFloat(pubA3)]
                                ]
                            }];
                            var series_personal = [{
                                type: 'pie',
                                name: 'Commuters',
                                innerSize: '50%',
                                data: [{
                                        name: '<10km',
                                        y: parseFloat(pubB1),
                                        dataLabels: {
                                            enabled: true
                                        }
                                    },
                                    ['10km-30km', parseFloat(pubB2)],
                                    ['>=30km', parseFloat(pubB3)]
                                ]
                            }];
                            var series_other = [{
                                type: 'pie',
                                name: 'Commuters',
                                innerSize: '50%',
                                data: [{
                                        name: '<10km',
                                        y: parseFloat(pubC1),
                                        dataLabels: {
                                            enabled: true
                                        }
                                    },
                                    ['10km-30km', parseFloat(pubC2)],
                                    ['>=30km', parseFloat(pubC3)]
                                ]
                            }];

                            var json_public = {};
                            json_public.chart = chart;
                            json_public.title = title_public;
                            json_public.tooltip = tooltip;
                            json_public.series = series_public;
                            json_public.plotOptions = plotOptions;
                            json_public.credits = credits;
                            $('.distance_public').highcharts(json_public);

                            var json_personal = {};
                            json_personal.chart = chart;
                            json_personal.title = title_personal;
                            json_personal.tooltip = tooltip;
                            json_personal.series = series_personal;
                            json_personal.plotOptions = plotOptions;
                            json_personal.credits = credits;
                            $('.distance_personal').highcharts(json_personal);

                            var json_other = {};
                            json_other.chart = chart;
                            json_other.title = title_other;
                            json_other.tooltip = tooltip;
                            json_other.series = series_other;
                            json_other.plotOptions = plotOptions;
                            json_other.credits = credits;
                            $('.distance_other').highcharts(json_other);
                        });

                    });
                });
            });
        </script>
    </div>
    <!-- content over -->



    <!-- footer part -->

    <footer class="foot">
        <!-- Navigation Menu  -->
        <div id='nav'>


            <a href="index.html">Home</a>&nbsp;&nbsp;&nbsp;&nbsp;
            <a href="characteristic.html">Characteristic</a>&nbsp;&nbsp;&nbsp;&nbsp;
            <a href="analysis.html">Analysis</a>&nbsp;&nbsp;&nbsp;&nbsp;
            <a href="group.html">Group</a>&nbsp;&nbsp;&nbsp;&nbsp;




        </div>

        <div id='backtotop'><a href="#">back to top</a></div>
        <div class="logo"> <img src="img/logo5.png" alt="" width="30px">



    </footer>

</body>

</html>